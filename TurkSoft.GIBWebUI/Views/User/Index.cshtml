@{
    ViewData["Title"] = "Kullanıcılar";
    ViewData["Subtitle"] = "Liste";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@section Styles {
    <style>
        /* ==== Kurumsal Modal Tasarımı (GİB Firma ile aynı stil) ==== */

        .modal-corporate .modal-header {
            background: linear-gradient(90deg, #3c8dbc, #00a65a);
            color: #fff;
            border-bottom: none;
            padding: 14px 20px;
        }

        .modal-corporate .modal-title {
            font-weight: 600;
            font-size: 16px;
            letter-spacing: .02em;
        }

        .modal-corporate .modal-header .close {
            color: #fff;
            opacity: .8;
            text-shadow: none;
        }

            .modal-corporate .modal-header .close:hover {
                opacity: 1;
            }

        .modal-corporate .modal-body {
            padding: 20px 24px 18px;
            background-color: #f9fafb;
        }

        .modal-corporate .modal-footer {
            background-color: #f5f7fa;
            border-top: 1px solid #e1e5ee;
            padding: 10px 20px;
        }

        .modal-corporate .form-group {
            margin-bottom: 10px;
        }

        .modal-corporate label {
            font-size: 13px;
            font-weight: 500;
            color: #4b4f56;
            margin-bottom: 4px;
        }

        .modal-corporate .form-control {
            border-radius: 3px;
            border-color: #d2d6de;
            box-shadow: none;
            font-size: 13px;
        }

            .modal-corporate .form-control:focus,
            .modal-corporate textarea.form-control:focus {
                border-color: #3c8dbc;
                box-shadow: 0 0 0 1px rgba(60, 141, 188, .25);
            }

        .modal-corporate .checkbox {
            margin-top: 4px;
            margin-bottom: 4px;
        }

            .modal-corporate .checkbox label {
                font-weight: 400;
                color: #555;
            }

        .modal-corporate .help-block {
            margin-top: 4px;
            margin-bottom: 0;
            font-size: 11px;
            color: #9ea3b0;
        }

        .modal-corporate .section-title {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: .08em;
            color: #9ea3b0;
            font-weight: 600;
            margin: 0 0 6px;
            padding-bottom: 4px;
            border-bottom: 1px solid #e6e9f0;
        }

            .modal-corporate .section-title i {
                margin-right: 4px;
                color: #3c8dbc;
            }

        .modal-corporate .m-t-20 {
            margin-top: 20px;
        }

        /* Büyük ekranlarda modal genişliği */
        @@media (min-width: 992px) {
            .modal-dialog.modal-lg {
                width: 900px;
            }
        }
    </style>
}

<div class="box">
    <div class="box-header with-border">
        <button id="btnNew" class="btn btn-primary">
            <i class="fa fa-plus"></i> Yeni Kayıt
        </button>
    </div>
    <div class="box-body">
        <table id="tblUsers" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Username</th>
                    <th>Email</th>
                    <th style="width:110px;">İşlemler</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<!-- Modal -->
<div id="userModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="userModalLabel">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content modal-corporate">
            <form id="userForm" method="post" novalidate>
                @Html.AntiForgeryToken()
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Kapat">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="userModalLabel">
                        <i class="fa fa-user"></i> Yeni Kullanıcı
                    </h4>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="Id" name="Id" />
                    <input type="hidden" id="RowVersionBase64" name="RowVersionBase64" />

                    <div class="row">
                        <div class="col-md-12">
                            <div class="section-title">
                                <i class="fa fa-building-o"></i> Firma &amp; Kullanıcı
                            </div>
                            <div class="form-group">
                                <label for="GibFirmId">Bağlı Olduğu GİB Firma</label>
                                <select class="form-control" id="GibFirmId">
                                    <option value="">Seçiniz</option>
                                </select>
                                <p class="help-block">
                                    Kullanıcı kaydedildikten sonra seçilen firmanın <strong>UserId</strong> alanı, bu kullanıcının <strong>Id</strong> değeri ile güncellenecektir.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="row m-t-20">
                        <div class="col-md-6">
                            <div class="section-title">
                                <i class="fa fa-id-card-o"></i> Kullanıcı Bilgileri
                            </div>

                            <div class="form-group">
                                <label for="Username">Kullanıcı Adı</label>
                                <input class="form-control" id="Username" name="Username" required maxlength="100" />
                            </div>

                            <div class="form-group">
                                <label for="Email">E-Posta</label>
                                <input type="email" class="form-control" id="Email" name="Email" required maxlength="200" />
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="section-title">
                                <i class="fa fa-lock"></i> Güvenlik
                            </div>

                            <div class="form-group">
                                <label for="Password">Şifre <span class="text-muted small" id="pwdHelp">(en az 6 karakter)</span></label>
                                <input type="password" class="form-control" id="Password" name="Password" />
                                <p class="help-block">
                                    Yeni kullanıcı için şifre zorunlu, güncellemede isteğe bağlıdır.
                                </p>
                            </div>

                            <div class="checkbox">
                                <label>
                                    <input type="checkbox" id="IsActive" name="IsActive" checked /> Aktif
                                </label>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button id="btnSave" type="submit" class="btn btn-success">
                        <i class="fa fa-save"></i> Kaydet
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Kapat</button>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script type="module" src="~/apps/user.js"></script>
}
